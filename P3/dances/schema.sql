CREATE TABLE Dance (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	DanceName TEXT NOT NULL,
	Video TEXT,
	Source TEXT
);

CREATE TABLE Step (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	DanceID INTEGER,
	StepName TEXT,
	FOREIGN KEY (DanceID) REFERENCES Dance (ID)
);

CREATE TABLE User (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	Username TEXT UNIQUE NOT NULL,
    Password TEXT,
	Name TEXT NOT NULL,
	Email TEXT NOT NULL,
	State TEXT,
	City TEXT,
	CreatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	UpdatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE Figure (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	Name TEXT NOT NULL,
	Roles TEXT NOT NULL,
	StartPosition TEXT NOT NULL,
	Action TEXT NOT NULL,
	EndPosition TEXT NOT NULL,
	Duration INTEGER NOT NULL
);

CREATE TABLE Learning (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	UserID TEXT,
	DanceID TEXT,
	DateAdded TEXT,
	FOREIGN KEY (UserID) REFERENCES User (ID),
	FOREIGN KEY (DanceID) REFERENCES Dance (ID)
);

CREATE TABLE Learned (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	UserID TEXT,
	DanceID TEXT,
	DateAdded TEXT,
	Rating INTEGER,
	FOREIGN KEY (UserID) REFERENCES User (ID),
	FOREIGN KEY (DanceID) REFERENCES Dance (ID)
);

CREATE TABLE FigureStep (
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	StepID INTEGER,
	FigureID INTEGER,
	Place INTEGER,
	FOREIGN KEY (StepID) REFERENCES Step (ID),
	FOREIGN KEY (FigureID) REFERENCES Figure (ID)
);
